<?php

namespace Application\Models;

use RSPhp\Framework\Model;
use RSPhp\Framework\Undefined;

/**
 * Entity model for @tableNameModel
 */
class @tableNameModel extends Model {

    @publicProperties

    /**
     * Creates an instance of @tableNameModel
     */
    public function __constructor()
    {
        @undefinedProperties

        // Call parent constructor
        parent::__construct();
    } // end function __constructor

    /**
     * Returns an instance of ActorModel
     */
    public function load(@constructorParams) {

        $result =
            parent::$db->from($this->getTableName())->
            where@paramsWhere->
            first();

        @loadProperties

    } // end function load

    /**
     * Save the model to the database table
     * @param string $forceInsert
     */
    function save($forceInsert = false) {

        $params = array(
            @saveProperties
        );

        $where = @arrayWhere;

        $params = parent::removeUndefined($params);
        $where = parent::removeUndefined($where);

        if ($forceInsert) {
            parent::$db->insert(
                $this->getTableName(),
                $params
            );
        } else {
            parent::$db->upsert(
                $this->getTableName(),
                $params,
                $where
            );
        } // end if then else

        @setSerialField

    } // end function save

    /**
     * Deletes the record
     */
    function delete()
    {
        $where = @arrayWhere;

        return parent::$db->delete(
            $this->getTableName(),
            @arrayWhere
        ); // end delete

    } // end function delete
} // end class @tableNameModel
